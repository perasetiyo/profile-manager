{"version":3,"sources":["Http/Middlewares/Validate.js"],"names":["type","action","ctx","next","filepath","resolve","truthy","access","console","log","Validator","require","default","validator","validate"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;;;;;AAGA;;;;;kBAKe,UAACA,IAAD,EAAOC,MAAP,EAAkB;AAC7B;AAAA,6DAAO,iBAAOC,GAAP,EAAYC,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACGC,oCADH,GACc,eAAKC,OAAL,6BAAuCL,IAAvC,kBADd;AAECM,kCAFD,GAEU,KAFV;AAAA;AAAA;AAAA,mCAIO,oBAAGC,MAAH,CAAUH,QAAV,CAJP;;AAAA;AAKCE,qCAAS,IAAT;AALD;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,iCAOCA,MAPD;AAAA;AAAA;AAAA;;AAQCE,oCAAQC,GAAR,eAAwBT,IAAxB,SAAgCC,MAAhC;AACMS,qCATP,GASmBC,QAAQP,QAAR,EAAkBQ,OATrC;AAUOC,qCAVP,GAUmB,IAAIH,SAAJ,CAAcV,IAAd,EAAoBC,MAApB,EAA4BC,GAA5B,CAVnB;AAAA;AAAA,mCAWOW,UAAUC,QAAV,EAXP;;AAAA;AAAA;AAAA,mCAaGX,MAbH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAP;;AAAA;AAAA;AAAA;AAAA;AAeH,C","file":"Http/Middlewares/Validate.js","sourcesContent":["import fs from 'fs-promise';\nimport path from 'path';\nimport { ERROR_CODES, HttpError } from 'people-manager/app';\n\n/**\n * Validate based on request type\n * validation configuration is located at src/Http/Validators\n * @param type - request type\n */\nexport default (type, action) => {\n    return async (ctx, next) => {\n        const filepath = path.resolve(`../src/Http/Validators/${type}Validator.js`)\n        let truthy = false;\n        try {\n            await fs.access(filepath);\n            truthy = true;\n        } catch (e) {}\n        if (truthy) {\n            console.log(`validate ${type}:${action}`);\n            const Validator = require(filepath).default;\n            const validator = new Validator(type, action, ctx);\n            await validator.validate();\n        }\n        await next();\n    };\n}\n"],"sourceRoot":"/home/apas/project/people-manager/src"}